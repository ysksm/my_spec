<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uint8é…åˆ— vs Uint8Array æ¯”è¼ƒ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #e0e0e0;
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #00d4ff;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .section h2 {
            color: #00d4ff;
            margin-bottom: 20px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section h2::before {
            content: '';
            width: 4px;
            height: 25px;
            background: #00d4ff;
            border-radius: 2px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .info-card {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #00d4ff;
        }

        .info-card.normal-array {
            border-left-color: #ff6b6b;
        }

        .info-card.typed-array {
            border-left-color: #4ecdc4;
        }

        .info-card h3 {
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .info-card.normal-array h3 {
            color: #ff6b6b;
        }

        .info-card.typed-array h3 {
            color: #4ecdc4;
        }

        .info-card ul {
            list-style: none;
            padding-left: 0;
        }

        .info-card li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .info-card li::before {
            content: 'â†’';
            color: #00d4ff;
        }

        .benchmark-controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
            align-items: center;
        }

        .benchmark-controls label {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .benchmark-controls input[type="number"] {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            padding: 10px;
            color: #fff;
            width: 150px;
        }

        button {
            background: linear-gradient(135deg, #00d4ff 0%, #0099cc 100%);
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.4);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .result-card {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .result-card h4 {
            margin-bottom: 15px;
            color: #aaa;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .result-values {
            display: flex;
            justify-content: space-around;
            gap: 20px;
        }

        .result-value {
            flex: 1;
        }

        .result-value .label {
            font-size: 0.8rem;
            color: #888;
            margin-bottom: 5px;
        }

        .result-value .value {
            font-size: 1.8rem;
            font-weight: bold;
        }

        .result-value.normal .value {
            color: #ff6b6b;
        }

        .result-value.typed .value {
            color: #4ecdc4;
        }

        .winner {
            background: rgba(78, 205, 196, 0.2);
            border: 1px solid #4ecdc4;
        }

        .bar-chart {
            margin-top: 15px;
            height: 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
            overflow: hidden;
            display: flex;
        }

        .bar {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
            transition: width 0.5s ease;
        }

        .bar.normal {
            background: linear-gradient(90deg, #ff6b6b 0%, #ee5a5a 100%);
        }

        .bar.typed {
            background: linear-gradient(90deg, #4ecdc4 0%, #3dbdb5 100%);
        }

        .code-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
        }

        .code-block {
            background: #1e1e1e;
            border-radius: 10px;
            overflow: hidden;
        }

        .code-header {
            padding: 10px 15px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .code-block.normal .code-header {
            background: rgba(255, 107, 107, 0.3);
            color: #ff6b6b;
        }

        .code-block.typed .code-header {
            background: rgba(78, 205, 196, 0.3);
            color: #4ecdc4;
        }

        .code-content {
            padding: 15px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.85rem;
            line-height: 1.6;
            overflow-x: auto;
            white-space: pre;
        }

        .code-content .comment {
            color: #6a9955;
        }

        .code-content .keyword {
            color: #569cd6;
        }

        .code-content .number {
            color: #b5cea8;
        }

        .code-content .string {
            color: #ce9178;
        }

        .code-content .method {
            color: #dcdcaa;
        }

        .interactive-demo {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .demo-controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .demo-output {
            background: #1e1e1e;
            border-radius: 8px;
            padding: 15px;
            font-family: monospace;
            max-height: 300px;
            overflow-y: auto;
        }

        .demo-output .log {
            margin: 5px 0;
            padding: 5px;
            border-radius: 3px;
        }

        .demo-output .log.info {
            background: rgba(0, 212, 255, 0.1);
            border-left: 3px solid #00d4ff;
        }

        .demo-output .log.success {
            background: rgba(78, 205, 196, 0.1);
            border-left: 3px solid #4ecdc4;
        }

        .demo-output .log.warning {
            background: rgba(255, 193, 7, 0.1);
            border-left: 3px solid #ffc107;
        }

        .demo-output .log.error {
            background: rgba(255, 107, 107, 0.1);
            border-left: 3px solid #ff6b6b;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        th {
            background: rgba(0, 212, 255, 0.1);
            color: #00d4ff;
        }

        tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .status-good {
            color: #4ecdc4;
        }

        .status-bad {
            color: #ff6b6b;
        }

        .status-neutral {
            color: #ffc107;
        }

        .memory-visual {
            display: flex;
            gap: 2px;
            flex-wrap: wrap;
            margin: 10px 0;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
        }

        .memory-cell {
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 3px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .memory-cell.normal {
            background: rgba(255, 107, 107, 0.6);
        }

        .memory-cell.typed {
            background: rgba(78, 205, 196, 0.6);
        }

        .summary-box {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(78, 205, 196, 0.1) 100%);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .summary-box h3 {
            color: #00d4ff;
            margin-bottom: 15px;
        }

        .summary-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .summary-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .summary-icon.perf {
            background: rgba(78, 205, 196, 0.3);
        }

        .summary-icon.ease {
            background: rgba(255, 107, 107, 0.3);
        }

        .summary-icon.mem {
            background: rgba(0, 212, 255, 0.3);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .loading {
            animation: pulse 1s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Uint8é…åˆ— vs Uint8Array å¾¹åº•æ¯”è¼ƒ</h1>

        <!-- åŸºæœ¬æƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="section">
            <h2>åŸºæœ¬æƒ…å ±</h2>
            <div class="info-grid">
                <div class="info-card normal-array">
                    <h3>é€šå¸¸ã®é…åˆ— (Array)</h3>
                    <ul>
                        <li>JavaScriptã®æ¨™æº–é…åˆ—ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</li>
                        <li>ä»»æ„ã®å‹ã‚’æ··åœ¨å¯èƒ½ï¼ˆNumber, String, Objectç­‰ï¼‰</li>
                        <li>å‹•çš„ã«ã‚µã‚¤ã‚ºå¤‰æ›´å¯èƒ½</li>
                        <li>å„è¦ç´ ãŒç‹¬ç«‹ã—ãŸãƒ¡ãƒ¢ãƒªé ˜åŸŸã‚’æŒã¤</li>
                        <li>è±Šå¯Œãªãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆmap, filter, reduceç­‰ï¼‰</li>
                        <li>64ãƒ“ãƒƒãƒˆæµ®å‹•å°æ•°ç‚¹æ•°ã¨ã—ã¦å†…éƒ¨ä¿å­˜</li>
                    </ul>
                </div>
                <div class="info-card typed-array">
                    <h3>Uint8Array (å‹ä»˜ãé…åˆ—)</h3>
                    <ul>
                        <li>ArrayBufferã®ãƒ“ãƒ¥ãƒ¼ã¨ã—ã¦å‹•ä½œ</li>
                        <li>0-255ã®æ•´æ•°ã®ã¿æ ¼ç´å¯èƒ½</li>
                        <li>å›ºå®šé•·ï¼ˆç”Ÿæˆæ™‚ã«ã‚µã‚¤ã‚ºæ±ºå®šï¼‰</li>
                        <li>é€£ç¶šã—ãŸãƒ¡ãƒ¢ãƒªãƒ–ãƒ­ãƒƒã‚¯ã‚’ä½¿ç”¨</li>
                        <li>ä¸€éƒ¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã®ã¿ã‚µãƒãƒ¼ãƒˆ</li>
                        <li>1ãƒã‚¤ãƒˆï¼ˆ8ãƒ“ãƒƒãƒˆï¼‰ã§å„è¦ç´ ã‚’ä¿å­˜</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ -->
        <div class="section">
            <h2>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</h2>
            <div class="benchmark-controls">
                <label>
                    é…åˆ—ã‚µã‚¤ã‚º:
                    <input type="number" id="arraySize" value="1000000" min="1000" max="10000000">
                </label>
                <label>
                    åå¾©å›æ•°:
                    <input type="number" id="iterations" value="100" min="10" max="1000">
                </label>
                <button id="runBenchmark" onclick="runBenchmarks()">ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Ÿè¡Œ</button>
            </div>

            <div class="results-grid" id="benchmarkResults">
                <div class="result-card">
                    <h4>é…åˆ—ç”Ÿæˆé€Ÿåº¦</h4>
                    <div class="result-values">
                        <div class="result-value normal">
                            <div class="label">é€šå¸¸é…åˆ—</div>
                            <div class="value" id="createNormal">-</div>
                        </div>
                        <div class="result-value typed">
                            <div class="label">Uint8Array</div>
                            <div class="value" id="createTyped">-</div>
                        </div>
                    </div>
                    <div class="bar-chart" id="createBar"></div>
                </div>

                <div class="result-card">
                    <h4>æ›¸ãè¾¼ã¿é€Ÿåº¦</h4>
                    <div class="result-values">
                        <div class="result-value normal">
                            <div class="label">é€šå¸¸é…åˆ—</div>
                            <div class="value" id="writeNormal">-</div>
                        </div>
                        <div class="result-value typed">
                            <div class="label">Uint8Array</div>
                            <div class="value" id="writeTyped">-</div>
                        </div>
                    </div>
                    <div class="bar-chart" id="writeBar"></div>
                </div>

                <div class="result-card">
                    <h4>èª­ã¿å–ã‚Šé€Ÿåº¦</h4>
                    <div class="result-values">
                        <div class="result-value normal">
                            <div class="label">é€šå¸¸é…åˆ—</div>
                            <div class="value" id="readNormal">-</div>
                        </div>
                        <div class="result-value typed">
                            <div class="label">Uint8Array</div>
                            <div class="value" id="readTyped">-</div>
                        </div>
                    </div>
                    <div class="bar-chart" id="readBar"></div>
                </div>

                <div class="result-card">
                    <h4>ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é€Ÿåº¦</h4>
                    <div class="result-values">
                        <div class="result-value normal">
                            <div class="label">é€šå¸¸é…åˆ—</div>
                            <div class="value" id="iterNormal">-</div>
                        </div>
                        <div class="result-value typed">
                            <div class="label">Uint8Array</div>
                            <div class="value" id="iterTyped">-</div>
                        </div>
                    </div>
                    <div class="bar-chart" id="iterBar"></div>
                </div>

                <div class="result-card">
                    <h4>ã‚³ãƒ”ãƒ¼é€Ÿåº¦</h4>
                    <div class="result-values">
                        <div class="result-value normal">
                            <div class="label">é€šå¸¸é…åˆ—</div>
                            <div class="value" id="copyNormal">-</div>
                        </div>
                        <div class="result-value typed">
                            <div class="label">Uint8Array</div>
                            <div class="value" id="copyTyped">-</div>
                        </div>
                    </div>
                    <div class="bar-chart" id="copyBar"></div>
                </div>

                <div class="result-card">
                    <h4>æ¨å®šãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡</h4>
                    <div class="result-values">
                        <div class="result-value normal">
                            <div class="label">é€šå¸¸é…åˆ—</div>
                            <div class="value" id="memNormal">-</div>
                        </div>
                        <div class="result-value typed">
                            <div class="label">Uint8Array</div>
                            <div class="value" id="memTyped">-</div>
                        </div>
                    </div>
                    <div class="bar-chart" id="memBar"></div>
                </div>
            </div>
        </div>

        <!-- ãƒ¡ãƒ¢ãƒªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¦–è¦šåŒ– -->
        <div class="section">
            <h2>ãƒ¡ãƒ¢ãƒªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®é•ã„</h2>
            <div class="info-grid">
                <div class="info-card normal-array">
                    <h3>é€šå¸¸é…åˆ—ã®ãƒ¡ãƒ¢ãƒª</h3>
                    <p style="margin-bottom: 10px; color: #aaa;">å„è¦ç´ ãŒç‹¬ç«‹ã—ãŸãƒ¡ãƒ¢ãƒªé ˜åŸŸï¼ˆ8ãƒã‚¤ãƒˆ + ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ï¼‰</p>
                    <div class="memory-visual" id="normalMemory"></div>
                    <p style="font-size: 0.85rem; color: #888;">
                        â€» å®Ÿéš›ã«ã¯å„è¦ç´ ã¯ã‚¿ã‚°ä»˜ããƒã‚¤ãƒ³ã‚¿ï¼ˆ64ãƒ“ãƒƒãƒˆï¼‰ã¨ã—ã¦ä¿å­˜ã•ã‚Œã€<br>
                        ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¸ã®å‚ç…§ã‚„SMIï¼ˆSmall Integerï¼‰ã¨ã—ã¦æœ€é©åŒ–ã•ã‚Œã‚‹å ´åˆã‚‚ã‚ã‚Šã¾ã™
                    </p>
                </div>
                <div class="info-card typed-array">
                    <h3>Uint8Arrayã®ãƒ¡ãƒ¢ãƒª</h3>
                    <p style="margin-bottom: 10px; color: #aaa;">é€£ç¶šã—ãŸ1ãƒã‚¤ãƒˆã®ãƒ¡ãƒ¢ãƒªãƒ–ãƒ­ãƒƒã‚¯</p>
                    <div class="memory-visual" id="typedMemory"></div>
                    <p style="font-size: 0.85rem; color: #888;">
                        â€» ArrayBufferã¨ã—ã¦é€£ç¶šã—ãŸãƒ¡ãƒ¢ãƒªé ˜åŸŸã‚’ç¢ºä¿<br>
                        å„è¦ç´ ã¯æ­£ç¢ºã«1ãƒã‚¤ãƒˆï¼ˆ8ãƒ“ãƒƒãƒˆï¼‰ã‚’ä½¿ç”¨
                    </p>
                </div>
            </div>
        </div>

        <!-- æ‰±ã„ã‚„ã™ã•æ¯”è¼ƒ -->
        <div class="section">
            <h2>æ‰±ã„ã‚„ã™ã•æ¯”è¼ƒ</h2>
            <table>
                <thead>
                    <tr>
                        <th>æ©Ÿèƒ½ãƒ»ç‰¹æ€§</th>
                        <th>é€šå¸¸é…åˆ—</th>
                        <th>Uint8Array</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>map(), filter(), reduce()</td>
                        <td class="status-good">â—‹ å®Œå…¨ã‚µãƒãƒ¼ãƒˆ</td>
                        <td class="status-neutral">â–³ è¿”ã‚Šå€¤ãŒé€šå¸¸é…åˆ—</td>
                    </tr>
                    <tr>
                        <td>push(), pop(), shift()</td>
                        <td class="status-good">â—‹ ã‚µãƒãƒ¼ãƒˆ</td>
                        <td class="status-bad">âœ• éã‚µãƒãƒ¼ãƒˆï¼ˆå›ºå®šé•·ï¼‰</td>
                    </tr>
                    <tr>
                        <td>splice()</td>
                        <td class="status-good">â—‹ ã‚µãƒãƒ¼ãƒˆ</td>
                        <td class="status-bad">âœ• éã‚µãƒãƒ¼ãƒˆ</td>
                    </tr>
                    <tr>
                        <td>slice()</td>
                        <td class="status-good">â—‹ ã‚µãƒãƒ¼ãƒˆ</td>
                        <td class="status-good">â—‹ ã‚µãƒãƒ¼ãƒˆï¼ˆåŒã˜å‹ã‚’è¿”ã™ï¼‰</td>
                    </tr>
                    <tr>
                        <td>set() - ä¸€æ‹¬ä»£å…¥</td>
                        <td class="status-bad">âœ• éã‚µãƒãƒ¼ãƒˆ</td>
                        <td class="status-good">â—‹ é«˜é€Ÿãªä¸€æ‹¬ä»£å…¥</td>
                    </tr>
                    <tr>
                        <td>subarray()</td>
                        <td class="status-bad">âœ• éã‚µãƒãƒ¼ãƒˆ</td>
                        <td class="status-good">â—‹ åŒã˜ãƒãƒƒãƒ•ã‚¡ã‚’å‚ç…§</td>
                    </tr>
                    <tr>
                        <td>ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿æ“ä½œ</td>
                        <td class="status-bad">âœ• ä¸å‘ã</td>
                        <td class="status-good">â—‹ æœ€é©</td>
                    </tr>
                    <tr>
                        <td>JSON.stringify()</td>
                        <td class="status-good">â—‹ ç›´æ¥å¤‰æ›å¯èƒ½</td>
                        <td class="status-neutral">â–³ é…åˆ—ã«å¤‰æ›å¿…è¦</td>
                    </tr>
                    <tr>
                        <td>ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ§‹æ–‡</td>
                        <td class="status-good">â—‹ å®Œå…¨ã‚µãƒãƒ¼ãƒˆ</td>
                        <td class="status-good">â—‹ ã‚µãƒãƒ¼ãƒˆ</td>
                    </tr>
                    <tr>
                        <td>å‹å®‰å…¨æ€§</td>
                        <td class="status-bad">âœ• ãªã—</td>
                        <td class="status-good">â—‹ 0-255ã«è‡ªå‹•ã‚¯ãƒ©ãƒ³ãƒ—</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- ã‚³ãƒ¼ãƒ‰ä¾‹æ¯”è¼ƒ -->
        <div class="section">
            <h2>ã‚³ãƒ¼ãƒ‰ä¾‹æ¯”è¼ƒ</h2>
            <div class="code-comparison">
                <div class="code-block normal">
                    <div class="code-header">é€šå¸¸é…åˆ—ã®ä½¿ç”¨ä¾‹</div>
                    <div class="code-content"><span class="comment">// ç”Ÿæˆ</span>
<span class="keyword">const</span> arr = <span class="keyword">new</span> <span class="method">Array</span>(<span class="number">10</span>).<span class="method">fill</span>(<span class="number">0</span>);
<span class="keyword">const</span> arr2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];

<span class="comment">// å‹•çš„è¿½åŠ </span>
arr.<span class="method">push</span>(<span class="number">255</span>);
arr.<span class="method">push</span>(<span class="number">300</span>);  <span class="comment">// 300ã®ã¾ã¾ä¿å­˜ï¼</span>

<span class="comment">// é…åˆ—æ“ä½œ</span>
<span class="keyword">const</span> doubled = arr.<span class="method">map</span>(x => x * <span class="number">2</span>);
<span class="keyword">const</span> filtered = arr.<span class="method">filter</span>(x => x > <span class="number">100</span>);
<span class="keyword">const</span> sum = arr.<span class="method">reduce</span>((a, b) => a + b, <span class="number">0</span>);

<span class="comment">// JSONå¤‰æ›</span>
<span class="keyword">const</span> json = <span class="method">JSON.stringify</span>(arr);

<span class="comment">// å‹ãŒæ··åœ¨å¯èƒ½ï¼ˆå±é™ºï¼‰</span>
arr[<span class="number">0</span>] = <span class="string">"hello"</span>;  <span class="comment">// ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„</span>
arr[<span class="number">1</span>] = { x: <span class="number">1</span> };  <span class="comment">// ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚‚å¯</span></div>
                </div>
                <div class="code-block typed">
                    <div class="code-header">Uint8Arrayã®ä½¿ç”¨ä¾‹</div>
                    <div class="code-content"><span class="comment">// ç”Ÿæˆ</span>
<span class="keyword">const</span> arr = <span class="keyword">new</span> <span class="method">Uint8Array</span>(<span class="number">10</span>);
<span class="keyword">const</span> arr2 = <span class="keyword">new</span> <span class="method">Uint8Array</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);

<span class="comment">// å€¤ã®è¨­å®šï¼ˆè‡ªå‹•ã‚¯ãƒ©ãƒ³ãƒ—ï¼‰</span>
arr[<span class="number">0</span>] = <span class="number">255</span>;
arr[<span class="number">1</span>] = <span class="number">300</span>;   <span class="comment">// 44ã«ãªã‚‹ï¼ˆ300 % 256ï¼‰</span>
arr[<span class="number">2</span>] = -<span class="number">1</span>;    <span class="comment">// 255ã«ãªã‚‹</span>

<span class="comment">// ä¸€æ‹¬ä»£å…¥ï¼ˆé«˜é€Ÿï¼‰</span>
arr.<span class="method">set</span>([<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>], <span class="number">0</span>);

<span class="comment">// ã‚µãƒ–é…åˆ—ï¼ˆåŒã˜ãƒãƒƒãƒ•ã‚¡ã‚’å‚ç…§ï¼‰</span>
<span class="keyword">const</span> sub = arr.<span class="method">subarray</span>(<span class="number">0</span>, <span class="number">5</span>);

<span class="comment">// ãƒã‚¤ãƒŠãƒªæ“ä½œ</span>
<span class="keyword">const</span> buffer = arr.buffer;
<span class="keyword">const</span> view = <span class="keyword">new</span> <span class="method">DataView</span>(buffer);

<span class="comment">// Base64å¤‰æ›</span>
<span class="keyword">const</span> base64 = <span class="method">btoa</span>(String.<span class="method">fromCharCode</span>(...arr));</div>
                </div>
            </div>
        </div>

        <!-- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ‡ãƒ¢ -->
        <div class="section">
            <h2>ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ‡ãƒ¢</h2>
            <div class="interactive-demo">
                <div class="demo-controls">
                    <button onclick="demoCreation()">ç”Ÿæˆæ–¹æ³•</button>
                    <button onclick="demoOverflow()">ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼å‹•ä½œ</button>
                    <button onclick="demoMethods()">ãƒ¡ã‚½ãƒƒãƒ‰æ¯”è¼ƒ</button>
                    <button onclick="demoBinary()">ãƒã‚¤ãƒŠãƒªæ“ä½œ</button>
                    <button onclick="demoConversion()">ç›¸äº’å¤‰æ›</button>
                    <button onclick="clearDemo()">ã‚¯ãƒªã‚¢</button>
                </div>
                <div class="demo-output" id="demoOutput">
                    <div class="log info">ãƒ‡ãƒ¢ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€å„æ©Ÿèƒ½ã®å‹•ä½œã‚’ç¢ºèªã—ã¦ãã ã•ã„</div>
                </div>
            </div>
        </div>

        <!-- ä½¿ç”¨å ´é¢ã®ã¾ã¨ã‚ -->
        <div class="section">
            <h2>ä½¿ç”¨å ´é¢ã®ã¾ã¨ã‚</h2>
            <div class="summary-box">
                <h3>Uint8Arrayã‚’ä½¿ã†ã¹ãå ´é¢</h3>
                <div class="summary-item">
                    <div class="summary-icon perf">ğŸš€</div>
                    <div>
                        <strong>å¤§é‡ã®ãƒã‚¤ãƒˆãƒ‡ãƒ¼ã‚¿å‡¦ç†</strong><br>
                        <span style="color: #aaa;">ç”»åƒã€éŸ³å£°ã€å‹•ç”»ãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†ã§åœ§å€’çš„ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹</span>
                    </div>
                </div>
                <div class="summary-item">
                    <div class="summary-icon mem">ğŸ’¾</div>
                    <div>
                        <strong>ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ãŒé‡è¦ãªå ´åˆ</strong><br>
                        <span style="color: #aaa;">1è¦ç´ 1ãƒã‚¤ãƒˆã§ã€é€šå¸¸é…åˆ—ã®ç´„8åˆ†ã®1ã®ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡</span>
                    </div>
                </div>
                <div class="summary-item">
                    <div class="summary-icon perf">ğŸ”Œ</div>
                    <div>
                        <strong>WebGLã€WebAudioã€WebSocket</strong><br>
                        <span style="color: #aaa;">Web APIã¨ã®ã‚„ã‚Šå–ã‚Šã«ã¯ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ãŒå¿…é ˆ</span>
                    </div>
                </div>
                <div class="summary-item">
                    <div class="summary-icon perf">ğŸ“</div>
                    <div>
                        <strong>ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿æ›¸ã</strong><br>
                        <span style="color: #aaa;">FileReaderã€Blobã€Fetchãªã©ã¨ã®é€£æº</span>
                    </div>
                </div>
            </div>

            <div class="summary-box" style="margin-top: 20px;">
                <h3>é€šå¸¸é…åˆ—ã‚’ä½¿ã†ã¹ãå ´é¢</h3>
                <div class="summary-item">
                    <div class="summary-icon ease">ğŸ“</div>
                    <div>
                        <strong>å‹•çš„ãªã‚µã‚¤ã‚ºå¤‰æ›´ãŒå¿…è¦</strong><br>
                        <span style="color: #aaa;">push, pop, spliceãªã©ã§è¦ç´ ã®è¿½åŠ ãƒ»å‰Šé™¤ãŒé »ç¹ãªå ´åˆ</span>
                    </div>
                </div>
                <div class="summary-item">
                    <div class="summary-icon ease">ğŸ”§</div>
                    <div>
                        <strong>è±Šå¯Œãªé…åˆ—ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ´»ç”¨</strong><br>
                        <span style="color: #aaa;">map, filter, reduceãªã©ã®é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°</span>
                    </div>
                </div>
                <div class="summary-item">
                    <div class="summary-icon ease">ğŸ¯</div>
                    <div>
                        <strong>å°è¦æ¨¡ãªãƒ‡ãƒ¼ã‚¿å‡¦ç†</strong><br>
                        <span style="color: #aaa;">è¦ç´ æ•°ãŒå°‘ãªã„å ´åˆã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å·®ã¯ç„¡è¦–ã§ãã‚‹</span>
                    </div>
                </div>
                <div class="summary-item">
                    <div class="summary-icon ease">ğŸ“‹</div>
                    <div>
                        <strong>JSONã¨ã®é€£æº</strong><br>
                        <span style="color: #aaa;">APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚„ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã§ç›´æ¥ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºå¯èƒ½</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ãƒ¡ãƒ¢ãƒªè¦–è¦šåŒ–ã®åˆæœŸåŒ–
        function initMemoryVisualization() {
            const normalMemory = document.getElementById('normalMemory');
            const typedMemory = document.getElementById('typedMemory');

            const values = [65, 128, 200, 50, 99, 180, 33, 255];

            normalMemory.innerHTML = values.map((v, i) =>
                `<div class="memory-cell normal" title="è¦ç´ ${i}: ${v} (8ãƒã‚¤ãƒˆä»¥ä¸Šä½¿ç”¨)">${v}</div>`
            ).join('');

            typedMemory.innerHTML = values.map((v, i) =>
                `<div class="memory-cell typed" title="è¦ç´ ${i}: ${v} (1ãƒã‚¤ãƒˆä½¿ç”¨)">${v}</div>`
            ).join('');
        }

        // ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Ÿè¡Œ
        async function runBenchmarks() {
            const btn = document.getElementById('runBenchmark');
            btn.disabled = true;
            btn.textContent = 'å®Ÿè¡Œä¸­...';

            const size = parseInt(document.getElementById('arraySize').value);
            const iterations = parseInt(document.getElementById('iterations').value);

            await new Promise(r => setTimeout(r, 100));

            // é…åˆ—ç”Ÿæˆãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯
            const createResults = benchmarkCreation(size, iterations);
            updateResult('create', createResults);

            await new Promise(r => setTimeout(r, 50));

            // æ›¸ãè¾¼ã¿ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯
            const writeResults = benchmarkWrite(size, iterations);
            updateResult('write', writeResults);

            await new Promise(r => setTimeout(r, 50));

            // èª­ã¿å–ã‚Šãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯
            const readResults = benchmarkRead(size, iterations);
            updateResult('read', readResults);

            await new Promise(r => setTimeout(r, 50));

            // ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯
            const iterResults = benchmarkIteration(size, iterations);
            updateResult('iter', iterResults);

            await new Promise(r => setTimeout(r, 50));

            // ã‚³ãƒ”ãƒ¼ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯
            const copyResults = benchmarkCopy(size, iterations);
            updateResult('copy', copyResults);

            // ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ï¼ˆæ¨å®šï¼‰
            const memResults = estimateMemory(size);
            updateMemoryResult(memResults);

            btn.disabled = false;
            btn.textContent = 'ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Ÿè¡Œ';
        }

        function benchmarkCreation(size, iterations) {
            // é€šå¸¸é…åˆ—
            const normalStart = performance.now();
            for (let i = 0; i < iterations; i++) {
                const arr = new Array(size).fill(0);
            }
            const normalTime = performance.now() - normalStart;

            // Uint8Array
            const typedStart = performance.now();
            for (let i = 0; i < iterations; i++) {
                const arr = new Uint8Array(size);
            }
            const typedTime = performance.now() - typedStart;

            return { normal: normalTime / iterations, typed: typedTime / iterations };
        }

        function benchmarkWrite(size, iterations) {
            const normalArr = new Array(size).fill(0);
            const typedArr = new Uint8Array(size);

            // é€šå¸¸é…åˆ—
            const normalStart = performance.now();
            for (let i = 0; i < iterations; i++) {
                for (let j = 0; j < size; j++) {
                    normalArr[j] = j % 256;
                }
            }
            const normalTime = performance.now() - normalStart;

            // Uint8Array
            const typedStart = performance.now();
            for (let i = 0; i < iterations; i++) {
                for (let j = 0; j < size; j++) {
                    typedArr[j] = j % 256;
                }
            }
            const typedTime = performance.now() - typedStart;

            return { normal: normalTime / iterations, typed: typedTime / iterations };
        }

        function benchmarkRead(size, iterations) {
            const normalArr = new Array(size).fill(0).map((_, i) => i % 256);
            const typedArr = new Uint8Array(size).map((_, i) => i % 256);
            let sum = 0;

            // é€šå¸¸é…åˆ—
            const normalStart = performance.now();
            for (let i = 0; i < iterations; i++) {
                sum = 0;
                for (let j = 0; j < size; j++) {
                    sum += normalArr[j];
                }
            }
            const normalTime = performance.now() - normalStart;

            // Uint8Array
            const typedStart = performance.now();
            for (let i = 0; i < iterations; i++) {
                sum = 0;
                for (let j = 0; j < size; j++) {
                    sum += typedArr[j];
                }
            }
            const typedTime = performance.now() - typedStart;

            return { normal: normalTime / iterations, typed: typedTime / iterations };
        }

        function benchmarkIteration(size, iterations) {
            const normalArr = new Array(size).fill(0).map((_, i) => i % 256);
            const typedArr = new Uint8Array(size).map((_, i) => i % 256);
            let sum = 0;

            // é€šå¸¸é…åˆ— for-of
            const normalStart = performance.now();
            for (let i = 0; i < iterations; i++) {
                sum = 0;
                for (const val of normalArr) {
                    sum += val;
                }
            }
            const normalTime = performance.now() - normalStart;

            // Uint8Array for-of
            const typedStart = performance.now();
            for (let i = 0; i < iterations; i++) {
                sum = 0;
                for (const val of typedArr) {
                    sum += val;
                }
            }
            const typedTime = performance.now() - typedStart;

            return { normal: normalTime / iterations, typed: typedTime / iterations };
        }

        function benchmarkCopy(size, iterations) {
            const normalArr = new Array(size).fill(0).map((_, i) => i % 256);
            const typedArr = new Uint8Array(size).map((_, i) => i % 256);

            // é€šå¸¸é…åˆ—
            const normalStart = performance.now();
            for (let i = 0; i < iterations; i++) {
                const copy = [...normalArr];
            }
            const normalTime = performance.now() - normalStart;

            // Uint8Array
            const typedStart = performance.now();
            for (let i = 0; i < iterations; i++) {
                const copy = new Uint8Array(typedArr);
            }
            const typedTime = performance.now() - typedStart;

            return { normal: normalTime / iterations, typed: typedTime / iterations };
        }

        function estimateMemory(size) {
            // é€šå¸¸é…åˆ—: å„è¦ç´ ãŒç´„16ãƒã‚¤ãƒˆï¼ˆ64ãƒ“ãƒƒãƒˆã‚¿ã‚°ä»˜ããƒã‚¤ãƒ³ã‚¿ + ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ï¼‰
            const normalBytes = size * 16;
            // Uint8Array: å„è¦ç´ ãŒ1ãƒã‚¤ãƒˆ + å°‘é‡ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰
            const typedBytes = size + 64;

            return {
                normal: normalBytes,
                typed: typedBytes
            };
        }

        function updateResult(prefix, results) {
            const normalEl = document.getElementById(`${prefix}Normal`);
            const typedEl = document.getElementById(`${prefix}Typed`);
            const barEl = document.getElementById(`${prefix}Bar`);

            normalEl.textContent = results.normal.toFixed(2) + 'ms';
            typedEl.textContent = results.typed.toFixed(2) + 'ms';

            const total = results.normal + results.typed;
            const normalPercent = (results.normal / total * 100).toFixed(1);
            const typedPercent = (results.typed / total * 100).toFixed(1);

            barEl.innerHTML = `
                <div class="bar normal" style="width: ${normalPercent}%">${normalPercent}%</div>
                <div class="bar typed" style="width: ${typedPercent}%">${typedPercent}%</div>
            `;

            // å‹è€…ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
            const card = normalEl.closest('.result-card');
            card.classList.remove('winner');
            if (results.typed < results.normal * 0.9) {
                card.classList.add('winner');
            }
        }

        function updateMemoryResult(results) {
            const normalEl = document.getElementById('memNormal');
            const typedEl = document.getElementById('memTyped');
            const barEl = document.getElementById('memBar');

            normalEl.textContent = formatBytes(results.normal);
            typedEl.textContent = formatBytes(results.typed);

            const total = results.normal + results.typed;
            const normalPercent = (results.normal / total * 100).toFixed(1);
            const typedPercent = (results.typed / total * 100).toFixed(1);

            barEl.innerHTML = `
                <div class="bar normal" style="width: ${normalPercent}%">${normalPercent}%</div>
                <div class="bar typed" style="width: ${typedPercent}%">${typedPercent}%</div>
            `;

            const card = normalEl.closest('.result-card');
            card.classList.add('winner');
        }

        function formatBytes(bytes) {
            if (bytes < 1024) return bytes + ' B';
            if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
            return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
        }

        // ãƒ‡ãƒ¢é–¢æ•°
        function log(message, type = 'info') {
            const output = document.getElementById('demoOutput');
            output.innerHTML += `<div class="log ${type}">${message}</div>`;
            output.scrollTop = output.scrollHeight;
        }

        function clearDemo() {
            document.getElementById('demoOutput').innerHTML = '';
        }

        function demoCreation() {
            clearDemo();
            log('=== é…åˆ—ç”Ÿæˆæ–¹æ³•ã®æ¯”è¼ƒ ===', 'info');

            log('\nã€é€šå¸¸é…åˆ—ã€‘', 'info');
            const arr1 = new Array(5).fill(0);
            log(`new Array(5).fill(0) â†’ [${arr1}]`);
            const arr2 = [1, 2, 3, 4, 5];
            log(`[1, 2, 3, 4, 5] â†’ [${arr2}]`);
            const arr3 = Array.from({length: 5}, (_, i) => i * 10);
            log(`Array.from({length: 5}, (_, i) => i * 10) â†’ [${arr3}]`);

            log('\nã€Uint8Arrayã€‘', 'success');
            const typed1 = new Uint8Array(5);
            log(`new Uint8Array(5) â†’ [${[...typed1]}]`);
            const typed2 = new Uint8Array([1, 2, 3, 4, 5]);
            log(`new Uint8Array([1, 2, 3, 4, 5]) â†’ [${[...typed2]}]`);
            const typed3 = Uint8Array.from({length: 5}, (_, i) => i * 10);
            log(`Uint8Array.from({length: 5}, (_, i) => i * 10) â†’ [${[...typed3]}]`);

            log('\nã€ArrayBufferã‹ã‚‰ç”Ÿæˆã€‘', 'success');
            const buffer = new ArrayBuffer(8);
            const typed4 = new Uint8Array(buffer);
            log(`const buffer = new ArrayBuffer(8);`);
            log(`new Uint8Array(buffer) â†’ length: ${typed4.length}`);
        }

        function demoOverflow() {
            clearDemo();
            log('=== ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼å‹•ä½œã®æ¯”è¼ƒ ===', 'info');

            log('\nã€é€šå¸¸é…åˆ—ã€‘å€¤ãŒãã®ã¾ã¾ä¿å­˜ã•ã‚Œã‚‹', 'warning');
            const arr = [];
            arr.push(255);
            log(`arr.push(255) â†’ ${arr[0]}`);
            arr.push(256);
            log(`arr.push(256) â†’ ${arr[1]} (ãã®ã¾ã¾256)`);
            arr.push(300);
            log(`arr.push(300) â†’ ${arr[2]} (ãã®ã¾ã¾300)`);
            arr.push(-1);
            log(`arr.push(-1) â†’ ${arr[3]} (ãã®ã¾ã¾-1)`);
            arr.push(1.5);
            log(`arr.push(1.5) â†’ ${arr[4]} (å°æ•°ã‚‚OK)`);

            log('\nã€Uint8Arrayã€‘0-255ã«è‡ªå‹•ã‚¯ãƒ©ãƒ³ãƒ—ï¼ˆmod 256ï¼‰', 'success');
            const typed = new Uint8Array(5);
            typed[0] = 255;
            log(`typed[0] = 255 â†’ ${typed[0]}`);
            typed[1] = 256;
            log(`typed[1] = 256 â†’ ${typed[1]} (256 % 256 = 0)`);
            typed[2] = 300;
            log(`typed[2] = 300 â†’ ${typed[2]} (300 % 256 = 44)`);
            typed[3] = -1;
            log(`typed[3] = -1 â†’ ${typed[3]} (255ã¨ã—ã¦è§£é‡ˆ)`);
            typed[4] = 1.5;
            log(`typed[4] = 1.5 â†’ ${typed[4]} (å°æ•°ç‚¹ä»¥ä¸‹åˆ‡ã‚Šæ¨ã¦)`);

            log('\nâ€» Uint8Arrayã¯å‹å®‰å…¨æ€§ã‚’æä¾›ã—ã€ãƒã‚°ã‚’é˜²ãã¾ã™', 'info');
        }

        function demoMethods() {
            clearDemo();
            log('=== ãƒ¡ã‚½ãƒƒãƒ‰æ¯”è¼ƒ ===', 'info');

            const arr = [1, 2, 3, 4, 5];
            const typed = new Uint8Array([1, 2, 3, 4, 5]);

            log('\nã€map() ã®å‹•ä½œã€‘', 'info');
            const arrMapped = arr.map(x => x * 2);
            log(`é€šå¸¸é…åˆ—.map(x => x * 2): [${arrMapped}] (Array)`);
            const typedMapped = typed.map(x => x * 2);
            log(`Uint8Array.map(x => x * 2): [${[...typedMapped]}] (Array! Uint8Arrayã§ã¯ãªã„)`);

            log('\nã€push() ã®å‹•ä½œã€‘', 'warning');
            arr.push(6);
            log(`é€šå¸¸é…åˆ—.push(6): [${arr}] âœ“ å‹•ä½œã™ã‚‹`);
            try {
                typed.push(6);
            } catch (e) {
                log(`Uint8Array.push(6): ã‚¨ãƒ©ãƒ¼! "${e.message}"`, 'error');
            }

            log('\nã€set() - Uint8Arrayå°‚ç”¨ã€‘', 'success');
            const typed2 = new Uint8Array(5);
            typed2.set([10, 20, 30], 1);
            log(`Uint8Array.set([10, 20, 30], 1): [${[...typed2]}]`);

            log('\nã€subarray() vs slice()ã€‘', 'success');
            const sub = typed.subarray(1, 4);
            log(`subarray(1, 4): [${[...sub]}] (åŒã˜ãƒãƒƒãƒ•ã‚¡ã‚’å…±æœ‰)`);
            sub[0] = 100;
            log(`sub[0] = 100 å¾Œã®å…ƒé…åˆ—: [${[...typed]}] (å¤‰æ›´ãŒåæ˜ ã•ã‚Œã‚‹ï¼)`);

            const sliced = new Uint8Array([1,2,3,4,5]).slice(1, 4);
            log(`slice(1, 4): [${[...sliced]}] (æ–°ã—ã„ãƒãƒƒãƒ•ã‚¡ã‚’ä½œæˆ)`);
        }

        function demoBinary() {
            clearDemo();
            log('=== ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿æ“ä½œ ===', 'info');

            log('\nã€ArrayBufferã¨ã®é€£æºã€‘', 'success');
            const buffer = new ArrayBuffer(8);
            const uint8View = new Uint8Array(buffer);
            const uint32View = new Uint32Array(buffer);

            uint8View.set([0x12, 0x34, 0x56, 0x78]);
            log(`Uint8Array: [${[...uint8View].map(x => '0x' + x.toString(16).padStart(2, '0'))}]`);
            log(`åŒã˜ãƒãƒƒãƒ•ã‚¡ã‚’Uint32Viewã§è¦‹ã‚‹ã¨: 0x${uint32View[0].toString(16)}`);
            log(`(ãƒªãƒˆãƒ«ã‚¨ãƒ³ãƒ‡ã‚£ã‚¢ãƒ³ã®ãŸã‚é †åºãŒé€†ã«ãªã‚‹)`);

            log('\nã€DataViewã§ã‚¨ãƒ³ãƒ‡ã‚£ã‚¢ãƒ³åˆ¶å¾¡ã€‘', 'success');
            const dataView = new DataView(buffer);
            const valueBE = dataView.getUint32(0, false);
            const valueLE = dataView.getUint32(0, true);
            log(`ãƒ“ãƒƒã‚°ã‚¨ãƒ³ãƒ‡ã‚£ã‚¢ãƒ³èª­ã¿å–ã‚Š: 0x${valueBE.toString(16)}`);
            log(`ãƒªãƒˆãƒ«ã‚¨ãƒ³ãƒ‡ã‚£ã‚¢ãƒ³èª­ã¿å–ã‚Š: 0x${valueLE.toString(16)}`);

            log('\nã€Base64å¤‰æ›ã€‘', 'success');
            const data = new Uint8Array([72, 101, 108, 108, 111]); // "Hello"
            const base64 = btoa(String.fromCharCode(...data));
            log(`[72, 101, 108, 108, 111] â†’ Base64: "${base64}"`);

            const decoded = new Uint8Array(atob(base64).split('').map(c => c.charCodeAt(0)));
            log(`Base64ãƒ‡ã‚³ãƒ¼ãƒ‰ â†’ [${[...decoded]}] â†’ "${String.fromCharCode(...decoded)}"`);
        }

        function demoConversion() {
            clearDemo();
            log('=== ç›¸äº’å¤‰æ› ===', 'info');

            log('\nã€é€šå¸¸é…åˆ— â†’ Uint8Arrayã€‘', 'success');
            const arr = [10, 20, 30, 40, 50];
            const typed1 = new Uint8Array(arr);
            log(`new Uint8Array([10, 20, 30, 40, 50]): [${[...typed1]}]`);
            const typed2 = Uint8Array.from(arr);
            log(`Uint8Array.from([...]): [${[...typed2]}]`);

            log('\nã€Uint8Array â†’ é€šå¸¸é…åˆ—ã€‘', 'info');
            const typed = new Uint8Array([1, 2, 3, 4, 5]);
            const arr1 = Array.from(typed);
            log(`Array.from(uint8Array): [${arr1}]`);
            const arr2 = [...typed];
            log(`[...uint8Array]: [${arr2}]`);

            log('\nã€JSONå¤‰æ›ã€‘', 'warning');
            log(`é€šå¸¸é…åˆ—: JSON.stringify([1,2,3]) = "${JSON.stringify([1,2,3])}"`);
            const typedForJson = new Uint8Array([1, 2, 3]);
            log(`Uint8Array: JSON.stringify(typed) = "${JSON.stringify(typedForJson)}"`);
            log(`â†’ {"0":1,"1":2,"2":3} ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦å¤‰æ›ã•ã‚Œã‚‹ï¼`);
            log(`â†’ é…åˆ—ã¨ã—ã¦å¤‰æ›: JSON.stringify([...typed]) = "${JSON.stringify([...typedForJson])}"`);

            log('\nã€æ–‡å­—åˆ—å¤‰æ›ã€‘', 'success');
            const text = "Hello";
            const encoder = new TextEncoder();
            const encoded = encoder.encode(text);
            log(`TextEncoder.encode("Hello"): [${[...encoded]}]`);

            const decoder = new TextDecoder();
            const decoded = decoder.decode(encoded);
            log(`TextDecoder.decode([...]): "${decoded}"`);
        }

        // åˆæœŸåŒ–
        initMemoryVisualization();
    </script>
</body>
</html>
